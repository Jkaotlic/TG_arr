version: "3.9"

services:
  tg-arr-bot:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: tg-arr-bot
    restart: unless-stopped
    environment:
      TELEGRAM_BOT_TOKEN: ${TELEGRAM_BOT_TOKEN:?Set TELEGRAM_BOT_TOKEN}
      ALLOWED_TG_IDS: ${ALLOWED_TG_IDS:-}
      ADMIN_TG_IDS: ${ADMIN_TG_IDS:-}
      PROWLARR_URL: ${PROWLARR_URL:?Set PROWLARR_URL}
      PROWLARR_API_KEY: ${PROWLARR_API_KEY:?Set PROWLARR_API_KEY}
      RADARR_URL: ${RADARR_URL:?Set RADARR_URL}
      RADARR_API_KEY: ${RADARR_API_KEY:?Set RADARR_API_KEY}
      SONARR_URL: ${SONARR_URL:?Set SONARR_URL}
      SONARR_API_KEY: ${SONARR_API_KEY:?Set SONARR_API_KEY}
      QBITTORRENT_URL: ${QBITTORRENT_URL:-}
      QBITTORRENT_USERNAME: ${QBITTORRENT_USERNAME:-admin}
      QBITTORRENT_PASSWORD: ${QBITTORRENT_PASSWORD:-}
      TIMEZONE: ${TIMEZONE:-Europe/Moscow}
      LOG_LEVEL: ${LOG_LEVEL:-INFO}
    volumes:
      - bot-data:/app/data
    deploy:
      resources:
        limits:
          memory: 256M
          cpus: '0.5'

volumes:
  bot-data:
    driver: local

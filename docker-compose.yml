version: "3.9"

services:
  tg-arr-bot:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: tg-arr-bot
    restart: unless-stopped
    environment:
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
      - ALLOWED_TG_IDS=${ALLOWED_TG_IDS}
      - ADMIN_TG_IDS=${ADMIN_TG_IDS:-}
      - PROWLARR_URL=${PROWLARR_URL}
      - PROWLARR_API_KEY=${PROWLARR_API_KEY}
      - RADARR_URL=${RADARR_URL}
      - RADARR_API_KEY=${RADARR_API_KEY}
      - SONARR_URL=${SONARR_URL}
      - SONARR_API_KEY=${SONARR_API_KEY}
      - TIMEZONE=${TIMEZONE:-UTC}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - DATABASE_PATH=data/bot.db
      - AUTO_GRAB_SCORE_THRESHOLD=${AUTO_GRAB_SCORE_THRESHOLD:-80}
    volumes:
      - bot-data:/app/data
    networks:
      - arr-network

networks:
  arr-network:
    external: true
    name: ${ARR_NETWORK:-arr-network}

volumes:
  bot-data:
    driver: local
